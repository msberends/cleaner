<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast and Easy Data Cleaning • cleaner</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Fast and Easy Data Cleaning">
<meta property="og:description" content="Data cleaning functions for classes logical,
  factor, numeric, character, currency and Date to make
  data cleaning fast and easy. Relying on very few dependencies, it 
  provides smart guessing, but with user options to override 
  anything if needed.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cleaner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/msberends/cleaner/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<p>% cleaner</p>
<div id="cleaner-fast-and-easy-data-cleaning" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#cleaner-fast-and-easy-data-cleaning" class="anchor"></a><code>cleaner</code>: Fast and Easy Data Cleaning</h1></div>
<p><strong>(Previously called <code>clean</code>, but renamed to <code>cleaner</code> upon CRAN request)</strong></p>
<p><strong>Website of this package: <a href="https://msberends.github.io/cleaner" class="uri">https://msberends.github.io/cleaner</a></strong></p>
<p><a href="https://CRAN.R-project.org/package=cleaner"><img src="https://www.r-pkg.org/badges/version/cleaner" alt="CRAN_Badge"></a></p>
<p>The R package for <strong>cleaning and checking data columns</strong> in a fast and easy way. Relying on very few dependencies, it provides <strong>smart guessing</strong>, but with user options to override anything if needed.</p>
<p>It also provides two new data types that are not available in base R: <code>currency</code> and <code>percentage</code>.</p>
<hr>
<p>Contents:</p>
<ul>
<li><a href="#why-this-package">Why this package</a></li>
<li>
<a href="#how-it-works">How it works</a>
<ul>
<li><a href="#cleaning">Cleaning</a></li>
<li><a href="#checking">Checking</a></li>
</ul>
</li>
<li><a href="#speed">Speed</a></li>
<li><a href="#invalid-regular-expressions">Invalid regular expressions</a></li>
</ul>
<hr>
<div id="why-this-package" class="section level2">
<h2 class="hasAnchor">
<a href="#why-this-package" class="anchor"></a>Why this package</h2>
<p>As a data scientist, I’m often served with data that is not clean, not tidy and consquently not ready for analysis at all. For tidying data, there’s of course the <code>tidyverse</code> (<a href="https://www.tidyverse.org" class="uri">https://www.tidyverse.org</a>), which lets you manipulate data in any way you can think of. But for <em>cleaning</em>, I think our community was still lacking a neat solution that makes data cleaning fast and easy with functions that kind of ‘think on their own’ to do that.</p>
<p>If the CRAN button at the top of this page is green, install the package with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"cleaner"</span>)
</pre></div>
<p>Otherwise, or if you are looking for the latest stable development version, install the package with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>) <span class="co"># if you haven't already</span>
<span class="kw">devtools</span>::<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"msberends/cleaner"</span>)
</pre></div>
</div>
<div id="how-it-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-it-works" class="anchor"></a>How it works</h2>
<p>This package provides two types of functions: <strong>cleaning</strong> and <strong>checking</strong>.</p>
<div id="cleaning" class="section level3">
<h3 class="hasAnchor">
<a href="#cleaning" class="anchor"></a>Cleaning</h3>
<p>Use <code><a href="reference/clean.html">clean()</a></code> to clean data. It guesses what kind of data class would best fit your input data. It calls any of the following functions, that can also be used independently. They <strong>always</strong> return the class from the function name (e.g. <code><a href="reference/clean.html">clean_Date()</a></code> always returns class <code>Date</code>).</p>
<ul>
<li>
<p><code><a href="reference/clean.html">clean_logical()</a></code> for values <code>TRUE</code>/<code>FALSE</code>. You only define what should be <code>TRUE</code> or <code>FALSE</code> and it handles the rest for you. At default, it supports “Yes” and “No” in the following languages: Arabic, Bengali, Chinese (Mandarin), Dutch, English, French, German, Hindi, Indonesian, Japanese, Malay, Portuguese, Russian, Spanish, Telugu, Turkish and Urdu. This covers at least two-third of the world population (Ulrich Ammon <em>et al.</em>, University of Düsseldorf).</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># English</span>
<span class="fu"><a href="reference/clean.html">clean_logical</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Invalid"</span>, <span class="st">"Unknown"</span>))
<span class="co">#&gt; [1]  TRUE FALSE    NA    NA</span>

<span class="co"># French</span>
<span class="fu"><a href="reference/clean.html">clean_logical</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Oui, c'est ca"</span>, <span class="st">"Non, pas encore"</span>)) 
<span class="co">#&gt; [1]  TRUE FALSE</span>

<span class="co"># Indonesian</span>
<span class="fu"><a href="reference/clean.html">clean_logical</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"ya :)"</span>, <span class="st">"tidak :("</span>))
<span class="co">#&gt; [1]  TRUE FALSE</span>
</pre></div>
<p>If you define the <code>true</code> and <code>false</code> parameters yourself, they will be interpreted as regular expressions:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_logical</a></span>(x = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Positive"</span>, <span class="st">"Negative"</span>, <span class="st">"Unknown"</span>, <span class="st">"Unknown"</span>),
              true = <span class="st">"pos"</span>,
              false = <span class="st">"neg"</span>)
<span class="co">#&gt; [1]  TRUE FALSE    NA    NA</span>

<span class="fu"><a href="reference/clean.html">clean_logical</a></span>(x = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Probable"</span>, <span class="st">"Not probable"</span>),
              true = <span class="st">".*"</span>,
              false = <span class="st">"not"</span>)
<span class="co">#&gt; [1]  TRUE FALSE</span>
</pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_factor()</a></code> for setting and redefining a <code>factor</code>. You can use regular expressions to match values in your data to set new factor levels.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">gender_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"male 0-50"</span>, <span class="st">"male 50+"</span>, <span class="st">"female 0-50"</span>, <span class="st">"female 50+"</span>)
<span class="kw">gender_age</span>
<span class="co">#&gt; [1] "male 0-50"   "male 50+"    "female 0-50" "female 50+"</span>

<span class="fu"><a href="reference/clean.html">clean_factor</a></span>(<span class="kw">gender_age</span>, levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"M"</span>, <span class="st">"F"</span>))
<span class="co">#&gt; [1] M M F F</span>
<span class="co">#&gt; Levels: M F</span>

<span class="fu"><a href="reference/clean.html">clean_factor</a></span>(<span class="kw">gender_age</span>, levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))
<span class="co">#&gt; [1] Male   Male   Female Female</span>
<span class="co">#&gt; Levels: Male Female</span>

<span class="fu"><a href="reference/clean.html">clean_factor</a></span>(<span class="kw">gender_age</span>, levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"0-50"</span>, <span class="st">"50+"</span>), ordered = <span class="fl">TRUE</span>)
<span class="co">#&gt; [1] 0-50 50+  0-50 50+ </span>
<span class="co">#&gt; Levels: 0-50 &lt; 50+</span>
</pre></div>
<p>You can also name your levels to let them match your values. They support regular expressions too:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_factor</a></span>(<span class="kw">gender_age</span>, levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"female"</span> = <span class="st">"Group A"</span>, 
                                    <span class="st">"male 50+"</span> = <span class="st">"Group B"</span>,
                                    <span class="st">".*"</span> = <span class="st">"Other"</span>))
<span class="co">#&gt; [1] Other   Group B Group A Group A</span>
<span class="co">#&gt; Levels: Group A Group B Other</span>
</pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_Date()</a></code> for any type of dates. This could be dates imported from Excel, or any combination of days, months and years. For convenience, the <code>format</code> parameter understands the date format language of Excel (like <code>d-mmm-yyyy</code>) and transforms it internally to the human-unreadable POSIX standard that R understands (<code>%e-%b-%Y</code>):</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_Date</a></span>(<span class="st">"13jul18"</span>, <span class="st">"ddmmmyy"</span>)
<span class="co">#&gt; [1] "2018-07-13"</span>

<span class="fu"><a href="reference/clean.html">clean_Date</a></span>(<span class="st">"12-06-2012"</span>)
<span class="co">#&gt; (assuming format 'dd-mm-yyyy')</span>
<span class="co">#&gt; [1] "2012-06-12"</span>

<span class="fu"><a href="reference/clean.html">clean_Date</a></span>(<span class="st">"14 August 2010"</span>)
<span class="co">#&gt; (assuming format 'dd mmmm yyyy')</span>
<span class="co">#&gt; [1] "2010-08-14"</span>

<span class="fu"><a href="reference/clean.html">clean_Date</a></span>(<span class="fl">38071</span>)
<span class="co">#&gt; (assuming Excel format)</span>
<span class="co">#&gt; [1] "2004-03-25"</span>
</pre></div>
<p>The function to transform <code>d-mmm-yyyy</code> to <code>%e-%b-%Y</code> is available as <code><a href="reference/format_datetime.html">format_datetime()</a></code> to users. This makes it possible to use it in other date functions too:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"12-13-14"</span>, format = <span class="fu"><a href="reference/format_datetime.html">format_datetime</a></span>(<span class="st">"mm-yy-dd"</span>))
<span class="co">#&gt; [1] "2013-12-14"</span>
</pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_POSIXct()</a></code> to remove all non-date/time characters and transform to a date/time element. It automatically adds the systems timezone, which can be changed by the user:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/clean.html">clean_POSIXct</a></span>(<span class="st">"Created log on 2019/04/11 11:23 by user Joe"</span>)
<span class="kw">a</span>
<span class="co">#&gt; "2019-04-11 11:23:00 CEST"</span>

<span class="kw">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/clean.html">clean_POSIXct</a></span>(<span class="st">"Log am 2019.04.11 11:23 erstellt"</span>, tz = <span class="st">"US/Michigan"</span>)
<span class="kw">b</span>
<span class="co">#&gt; "2019-04-11 11:23:00 EDT"</span>

<span class="fu"><a href="https://rdrr.io/r/base/difftime.html">difftime</a></span>(<span class="kw">a</span>, <span class="kw">b</span>)
<span class="co">#&gt; Time difference of -6 hours</span>
</pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_numeric()</a></code> to remove all non-numbers from cluttered input text. It understands usage of dots and comma’s in different languages:</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_numeric</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"$ 12,345.67"</span>,
                <span class="st">"€ 12.345,67"</span>,
                <span class="st">"12,345.67"</span>,
                <span class="st">"12345,67"</span>))
<span class="co">#&gt; [1] 12345.67 12345.67 12345.67 12345.67</span>

<span class="fu"><a href="reference/clean.html">clean_numeric</a></span>(<span class="st">"qwerty123456"</span>)
<span class="co">#&gt; [1] 123456</span>

<span class="fu"><a href="reference/clean.html">clean_numeric</a></span>(<span class="st">"Positive (0.143)"</span>)
<span class="co">#&gt; [1] 0.143</span>
</pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_character()</a></code> to remove all obvious non-characters from cluttered input text:</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"qwerty123456"</span>)
<span class="co">#&gt; [1] "qwerty"</span>

<span class="fu"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"Positive (0.143)"</span>)
<span class="co">#&gt; [1] "Positive"</span>
</pre></div>
<p>You can define yourself what should be removed using the <code>remove</code> argument, with regular expressions:</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_character</a></span>(x = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Model: Pro A1          "</span>,
                      <span class="st">"Model specified: Pro A1"</span>,
                      <span class="st">"       Pro A1          "</span>), 
                remove = <span class="st">"^.*:"</span>)
<span class="co">#&gt; [1] "Pro A1" "Pro A1" "Pro A1"</span>
</pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_percentage()</a></code> to use the new <code>percentage</code> class that comes with this package. It prints numeric values as percentages using <code><a href="reference/percentage.html">as.percentage()</a></code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="fu"><a href="reference/percentage.html">as.percentage</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.25</span>, <span class="fl">2.5</span>, <span class="fl">0.025</span>))
<span class="co">#&gt; [1]  25.0% 250.0%   2.5%</span>

<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="fu"><a href="reference/percentage.html">as.percentage</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.25</span>, <span class="fl">2.5</span>, <span class="fl">0.025</span>)))
<span class="co">#&gt; [1] 277.5%</span>

<span class="fu"><a href="reference/clean.html">clean_percentage</a></span>(<span class="st">"PCT: 0.143"</span>)
<span class="co">#&gt; [1] 14.3%</span>
</pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_currency()</a></code> to use the new <code>currency</code> class that comes with this package. It transforms the input with <code><a href="reference/clean.html">clean_numeric()</a></code> first, after which it will be transformed with <code><a href="reference/currency.html">as.currency()</a></code>, guessing the currency symbol based on your system locale:</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_currency</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Jack sent £ 25"</span>, <span class="st">"Bill sent £ 31.40"</span>))
<span class="co">#&gt; [1] `GBP 25.00` `GBP 31.40`</span>

<span class="kw">received</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/clean.html">clean_currency</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Received $25"</span>, <span class="st">"Received $31.40"</span>))
<span class="kw">received</span>
<span class="co">#&gt; [1] `USD 25.00` `USD 31.40`</span>

<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw">received</span>)
<span class="co">#&gt; [1] `USD 56.40`</span>

<span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw">received</span>), 
       currency_symbol = <span class="st">"€"</span>, decimal.mark = <span class="st">","</span>)
<span class="co">#&gt; [1] "€ 56,40"</span>
</pre></div>
<p>This new class also comes with support for printing in <code>tibble</code>s, used by the <a href="https://www.tidyverse.org"><code>tidyverse</code></a>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://tibble.tidyverse.org">tibble</a></span>)
<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(money = <span class="fu"><a href="reference/clean.html">clean_currency</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Jack sent £ 25"</span>, <span class="st">"Bill sent £ 31.40"</span>)))
<span class="co">#&gt; # A tibble: 2 x 1</span>
<span class="co">#&gt;         money</span>
<span class="co">#&gt;   &lt;crncy/GBP&gt;</span>
<span class="co">#&gt; 1       25.00</span>
<span class="co">#&gt; 2       31.40</span>
</pre></div>
</li>
</ul>
<div id="other-cleaning" class="section level4">
<h4 class="hasAnchor">
<a href="#other-cleaning" class="anchor"></a>Other cleaning</h4>
<ul>
<li>
<p>Use <code><a href="reference/format_names.html">format_names()</a></code> to quickly and easily change names of <code>data.frame</code> columns, <code>list</code>s or <code>character</code> vectors.</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="fu"><a href="reference/format_names.html">format_names</a></span>(<span class="kw">df</span>, snake_case = <span class="fl">TRUE</span>)
<span class="fu"><a href="reference/format_names.html">format_names</a></span>(<span class="kw">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(old.name = <span class="st">"new_name"</span>, value = <span class="st">"measurement"</span>))

<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="kw">starwars</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/format_names.html">format_names</a></span>(camelCase = <span class="fl">TRUE</span>) <span class="op">%&gt;%</span> <span class="co"># changes column names</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(name = <span class="kw">name</span> <span class="op">%&gt;%</span> 
           <span class="fu"><a href="reference/format_names.html">format_names</a></span>(snake_case = <span class="fl">TRUE</span>)) <span class="co"># changes values in column</span>
</pre></div>
</li>
<li>
<p>Use the generic function <code><a href="reference/na_replace.html">na_replace()</a></code> to replace <code>NA</code> values in any data type. Its default replacement value is dependent on the data type that is given as input: <code>0</code> for numeric values and class <code>matrix</code>, <code>FALSE</code> for class <code>logical</code>, today for class <code>Date</code>, and <code>""</code> otherwise.</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="fu"><a href="reference/na_replace.html">na_replace</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">NA</span>, <span class="fl">NA</span>))
<span class="co">#&gt; [1] 1 2 0 0</span>
<span class="fu"><a href="reference/na_replace.html">na_replace</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">NA</span>, <span class="fl">NA</span>), replacement = <span class="op">-</span><span class="fl">1</span>)
<span class="co">#&gt; [1]  1  2 -1 -1</span>
<span class="fu"><a href="reference/na_replace.html">na_replace</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">NA</span>, <span class="fl">NA</span>), replacement = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>))
<span class="co">#&gt; [1]  1  2  0 -1</span>

<span class="fu"><a href="reference/na_replace.html">na_replace</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="fl">NA</span>, <span class="fl">NA</span>))
<span class="co">#&gt; [1] "a" "b" ""  ""</span>
</pre></div>
<p>It also supports replacing <code>NA</code>s in complete data sets and supports grouped variables used by the <code>dplyr</code> package:</p>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="kw">starwars</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/na_replace.html">na_replace</a></span>(<span class="kw">hair_color</span>) <span class="co"># only replace NAs in this column</span>

<span class="kw">starwars</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/na_replace.html">na_replace</a></span>() <span class="co"># replace NAs in all columns ("" for hair_color and 0 for birth_year)</span>

<span class="kw">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="kw">hair_color</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/na_replace.html">na_replace</a></span>(<span class="kw">hair_color</span>, replacement = <span class="st">"TEST!"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(n = <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span>())
</pre></div>
</li>
</ul>
</div>
</div>
<div id="checking" class="section level3">
<h3 class="hasAnchor">
<a href="#checking" class="anchor"></a>Checking</h3>
<p>Any idea why in R <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> and <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code> and <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> exist, but <code>is.Date()</code> doesn’t? Me neither, but now it does. And you probably know <code><a href="https://rdrr.io/r/stats/Uniform.html">runif()</a></code> to create random numeric values. Now <code><a href="reference/rdate.html">rdate()</a></code> exists as well, for generating random dates.</p>
<p>The easiest and most comprehensive way to check the data of a column/variable is to create frequency tables. Use <code><a href="reference/freq.html">freq()</a></code> to do this. It supports a lot of different classes (types of data) and is even extendible by other packages.</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="fu"><a href="reference/freq.html">freq</a></span>(<span class="kw">unclean</span><span class="op">$</span><span class="kw">gender</span>)
<span class="co">#&gt; Frequency table </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Class:      character</span>
<span class="co">#&gt; Length:     500</span>
<span class="co">#&gt; Available:  500 (100%, NA: 0 = 0%)</span>
<span class="co">#&gt; Unique:     5</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Shortest:   1</span>
<span class="co">#&gt; Longest:    6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      Item      Count   Percent   Cum. Count   Cum. Percent</span>
<span class="co">#&gt; ---  -------  ------  --------  -----------  -------------</span>
<span class="co">#&gt; 1    male        240     48.0%          240          48.0%</span>
<span class="co">#&gt; 2    female      220     44.0%          460          92.0%</span>
<span class="co">#&gt; 3    man          22      4.4%          482          96.4%</span>
<span class="co">#&gt; 4    m            15      3.0%          497          99.4%</span>
<span class="co">#&gt; 5    F             3      0.6%          500         100.0%</span>
</pre></div>
<p>Clean it and check again:</p>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="fu"><a href="reference/freq.html">freq</a></span>(<span class="fu"><a href="reference/clean.html">clean_factor</a></span>(<span class="kw">unclean</span><span class="op">$</span><span class="kw">gender</span>, 
                  levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"^m"</span> = <span class="st">"Male"</span>, <span class="st">"^f"</span> = <span class="st">"Female"</span>)))
<span class="co">#&gt; Frequency table </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Class:      factor (numeric)</span>
<span class="co">#&gt; Length:     500</span>
<span class="co">#&gt; Levels:     2: Male, Female</span>
<span class="co">#&gt; Available:  500 (100%, NA: 0 = 0%)</span>
<span class="co">#&gt; Unique:     2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      Item      Count   Percent   Cum. Count   Cum. Percent</span>
<span class="co">#&gt; ---  -------  ------  --------  -----------  -------------</span>
<span class="co">#&gt; 1    Male        277     55.4%          277          55.4%</span>
<span class="co">#&gt; 2    Female      223     44.6%          500         100.0%</span>
</pre></div>
<p>This could also have been done with <code>dplyr</code> syntax, since <code><a href="reference/freq.html">freq()</a></code> supports tidy evaluation:</p>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="kw">unclean</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/freq.html">freq</a></span>(<span class="fu"><a href="reference/clean.html">clean_factor</a></span>(<span class="kw">gender</span>,
                    levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"^m"</span> = <span class="st">"Male"</span>, <span class="st">"^f"</span> = <span class="st">"Female"</span>)))
<span class="co"># or:</span>
<span class="kw">unclean</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="kw">gender</span>) <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/clean.html">clean_factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"^m"</span> = <span class="st">"Male"</span>, <span class="st">"^f"</span> = <span class="st">"Female"</span>)) <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/freq.html">freq</a></span>()
</pre></div>
</div>
</div>
<div id="speed" class="section level2">
<h2 class="hasAnchor">
<a href="#speed" class="anchor"></a>Speed</h2>
<p>The cleaning functions are tremendously fast, because they rely on R’s own internal C++ libraries:</p>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="co"># Create a vector with 500,000 items</span>
<span class="kw">n</span> <span class="op">&lt;-</span> <span class="fl">500000</span>
<span class="kw">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"yes"</span>, <span class="st">"no"</span>), <span class="kw">n</span>, replace = <span class="fl">TRUE</span>), 
                 <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="kw">n</span>, <span class="fl">0</span>, <span class="fl">10000</span>)))

<span class="co"># data looks like:</span>
<span class="kw">values</span>[<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>]
<span class="co">#&gt; [1] "no3697"  "yes1906" "yes6738"</span>

<span class="fu"><a href="reference/clean.html">clean_logical</a></span>(<span class="kw">values</span>[<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>])
<span class="co">#&gt; [1] FALSE  TRUE  TRUE</span>

<span class="fu"><a href="reference/clean.html">clean_character</a></span>(<span class="kw">values</span>[<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>])
<span class="co">#&gt; [1] "no"  "yes" "yes"</span>

<span class="fu"><a href="reference/clean.html">clean_numeric</a></span>(<span class="kw">values</span>[<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>])
<span class="co">#&gt; [1] 3697 1906 6738</span>

<span class="co"># benchmark the cleaning based on 10 runs and show it in seconds:</span>
<span class="kw">microbenchmark</span>::<span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(logical = <span class="fu"><a href="reference/clean.html">clean_logical</a></span>(<span class="kw">values</span>),
                               character = <span class="fu"><a href="reference/clean.html">clean_character</a></span>(<span class="kw">values</span>),
                               numeric = <span class="fu"><a href="reference/clean.html">clean_numeric</a></span>(<span class="kw">values</span>),
                               times = <span class="fl">10</span>,
                               unit = <span class="st">"s"</span>)
<span class="co">#&gt; Unit: seconds</span>
<span class="co">#&gt; expr            min        lq      mean    median        uq       max neval</span>
<span class="co">#&gt; logical   0.2846163 0.2925479 0.3076008 0.3100244 0.3189712 0.3269428    10</span>
<span class="co">#&gt; character 0.4522698 0.4593437 0.4734631 0.4636837 0.4888959 0.5303473    10</span>
<span class="co">#&gt; numeric   0.6428362 0.6476207 0.6618845 0.6542312 0.6778215 0.6897005    10</span>
</pre></div>
<p>Cleaning 500,000 values (!) only takes 0.3-0.6 seconds on our system.</p>
</div>
<div id="invalid-regular-expressions" class="section level2">
<h2 class="hasAnchor">
<a href="#invalid-regular-expressions" class="anchor"></a>Invalid regular expressions</h2>
<p>If invalid regular expressions are used, the cleaning functions will not throw errors, but instead will show a warning and will interpret the expression as a fixed value:</p>
<div class="sourceCode" id="cb23"><pre class="downlit">
<span class="fu"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"0123test 0123[a-b] "</span>)
<span class="co">#&gt; [1] "test ab"</span>

<span class="fu"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"0123test 0123[a-b] "</span>, remove = <span class="st">"[a-b]"</span>)
<span class="co">#&gt; [1] "0123test 0123[-]"</span>

<span class="fu"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"0123test0123"</span>, remove = <span class="st">"[a-b"</span>)
<span class="co">#&gt; [1] "0123test 0123]"</span>
<span class="co">#&gt; Warning message:</span>
<span class="co">#&gt; invalid regular expression '[a-b', reason 'Missing ']'' - now interpreting as fixed value </span>
</pre></div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=cleaner">https://​cloud.r-project.org/​package=cleaner</a>
</li>
<li>Browse source code at <br><a href="https://github.com/msberends/cleaner/">https://​github.com/​msberends/​cleaner/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/msberends/cleaner/issues">https://​github.com/​msberends/​cleaner/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Matthijs S. Berends <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7620-1800" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Matthijs S. Berends.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
